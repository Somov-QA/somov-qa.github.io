

<html>
	
<head>
	<title>Тестирование с помощью Monkey</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="generator" content="HelpNDoc Personal Edition 5.4.1.404">
	<meta name="keywords" content="">
	
	
	
	<link type="text/css" rel="stylesheet" media="all" href="css/reset.css" />
	<link type="text/css" rel="stylesheet" media="all" href="css/base.css" />
	<link type="text/css" rel="stylesheet" media="all" href="css/hnd.css" />
	<!--[if lte IE 8]>
		<link type="text/css" rel="stylesheet" media="all" href="css/ielte8.css" />
	<![endif]-->
	<style type="text/css">
		#topic_header
		{
			background-color: #EFEFEF;
		}
	</style>
	<script type="text/javascript" src="js/jquery.min.js"></script>
	<script type="text/javascript" src="js/hnd.js"></script>
	<script type="text/javascript">
		$(document).ready(function()
		{
			if (top.frames.length == 0)
			{
				var sTopicUrl = top.location.href.substring(top.location.href.lastIndexOf("/") + 1, top.location.href.length);
				top.location.href = "index.html?" + sTopicUrl;
			}
			else
			{
				var bTocSelected = false;
				(function waitForTOC()
				{
					if (top && top.FrameTOC && top.FrameTOC.SelectTocItem)
					{
						top.FrameTOC.SelectTocItem("Monkey");
						bTocSelected = true;
					}
					if (!bTocSelected) setTimeout(function() { waitForTOC(); }, 300);
				})();
			}
		});
	</script>
	
	
</head>

<body>



	
		<div id="topic_header">
			<div id="topic_header_content">
				<h1 id="topic_header_text">Тестирование с помощью Monkey</h1>
				
				
				<div id="topic_breadcrumb">
					<a href="Newtopic9.html">ПО автоматизированного тестирования</a> &rsaquo;&rsaquo; <a href="AndroidSDK.html">Android SDK</a> &rsaquo;&rsaquo; 
				</div>
				
			</div>
			
			<div id="topic_header_nav">
				
				
				<a href="AndroidSDK.html"><img src="img/arrow_up.png" alt="Parent"/></a>
				
				
				
				<a href="ADB.html"><img src="img/arrow_left.png" alt="Previous"/></a>
				
				
				
				<a href="MonkeyRunner.html"><img src="img/arrow_right.png" alt="Next"/></a>
				
				
			</div>
			
			<div class="clear"></div>
		</div>
	
	
	<div id="topic_content">
		
<p></p>
<p class="rvps5"><span class="rvts13">Утилита monkey входит в состав Android SDK. Утилита отправляет на устройство поток псевдослучайных действий пользователя. Параметры командной строки задают количество действий пользователя, соотношение их типов и имя тестируемого пакета</span></p>
<p class="rvps5"><span class="rvts13"><br/></span></p>
<p class="rvps5"><span class="rvts13">Параметры и примеры на сайте: </span><a class="rvts14" href="http://developer.android.com/tools/help/monkey.html">http://developer.android.com/tools/help/monkey.html</a></p>
<p class="rvps5"><span class="rvts13">Просмотр справочной информации Monkey</span></p>
<p class="rvps5"><span class="rvts16"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="rvts17">adb shell monkey --help</span></p>
<p class="rvps5"><span class="rvts13"><br/></span></p>
<p class="rvps5"><span class="rvts13">Синтаксис команды:</span></p>
<p class="rvps11"><span class="rvts16"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="rvts27">adb shell monkey</span><span class="rvts28"> </span><span class="rvts29">[</span><span class="rvts30">options</span><span class="rvts29">]</span><span class="rvts28"> </span><span class="rvts29">&lt;</span><span class="rvts31">event</span><span class="rvts32">-</span><span class="rvts30">count</span><span class="rvts29">&gt;</span></p>
<p class="rvps5"><span class="rvts13"><br/></span></p>
<p class="rvps5"><span class="rvts13">Запуск пакета и отправка 500 псевдослучайных событий</span></p>
<p class="rvps11"><span class="rvts13"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="rvts17">adb shell monkey -p </span><span class="rvts16">your.package.name</span><span class="rvts17"> -v 500</span></p>
<p class="rvps11"><span class="rvts13"><br/></span></p>
<p class="rvps11"><span class="rvts13">Имя пакета можно узнать зайдя в папку </span><span class="rvts15">../Android/data</span></p>
<p class="rvps11"><img width="597" height="160" alt="" style="padding : 1px;" src="lib/NewItem11.png"></p>
<p class="rvps11"><span class="rvts13"><br/></span></p>
<p class="rvps11"><span class="rvts13">Результат проверки</span></p>
<p class="rvps11"><img width="601" height="303" alt="" style="padding : 1px;" src="lib/NewItem10.png"></p>
<p class="rvps12"><span class="rvts19">Таблица </span><span class="rvts33">Command Options Reference</span></p>
<p class="rvps5"><span class="rvts13"><br/></span></p>
<div class="rvps15"><table border="1" cellpadding="4" cellspacing="-1" style="border-width: 0px; border-collapse: collapse;">
<tr valign="top">
<td width="127" valign="top" style="border-width : 1px; border-color: #dddddd; border-style: solid; padding: 0px 7px; background-color: #999999;"><p class="rvps13"><span class="rvts34">Category (Категория)</span></p>
</td>
<td width="210" valign="top" style="border-width : 1px; border-color: #dddddd; border-style: solid; padding: 0px 7px; background-color: #999999;"><p class="rvps13"><span class="rvts34">Option (Опции)</span></p>
</td>
<td width="300" valign="top" style="border-width : 1px; border-color: #dddddd; border-style: solid; padding: 0px 7px; background-color: #999999;"><p class="rvps13"><span class="rvts34">Description </span><br/><span class="rvts34">(Описание)</span></p>
</td>
</tr>
<tr valign="top">
<td rowspan="2" width="127" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts13">General</span><br/><span class="rvts13">(Общее)</span></p>
</td>
<td width="210" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts35">--help</span></p>
</td>
<td width="300" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts13">справочная информация</span></p>
</td>
</tr>
<tr valign="top">
<td width="210" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts35">-v</span></p>
</td>
<td width="300" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts36">в командной строке будет увеличивать уровень детализации.</span></p>
</td>
</tr>
<tr valign="top">
<td rowspan="10" width="127" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts13">Events</span><br/><span class="rvts13">(События)</span></p>
</td>
<td width="210" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts35">-s &lt;seed&gt;</span></p>
</td>
<td width="300" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts13">Начальное значение для генератора псевдослучайных чисел. Если вы повторно выполните Monkey с тем же начальным значением, то он будет генерировать ту же самую последовательность событий</span></p>
</td>
</tr>
<tr valign="top">
<td width="210" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts35">--throttle &lt;milliseconds&gt;</span></p>
</td>
<td width="300" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts13">Вставляет фиксированной задержки между событиями. Вы можете использовать эту опцию, чтобы замедлить Monkey. Если не указан, нет никакой задержки и события генерируются как можно быстрее.</span></p>
</td>
</tr>
<tr valign="top">
<td width="210" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts35">--pct-touch &lt;percent&gt;</span></p>
</td>
<td width="300" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts36">Регулировать процент сенсорных событий. (События прикосновения вниз-вверх действие в одном месте на экране.)</span></p>
</td>
</tr>
<tr valign="top">
<td width="210" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts35">--pct-motion &lt;percent&gt;</span></p>
</td>
<td width="300" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts36">Регулировать процент движения событий. (События движения состоят из вниз действий где-нибудь на экране, ряд псевдослучайных движений, и до события вверх.)</span></p>
</td>
</tr>
<tr valign="top">
<td width="210" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts35">--pct-trackball &lt;percent&gt;</span></p>
</td>
<td width="300" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts13">Регулировать процент трекбол событий. (Трекбол события состоять из одного или более произвольным движениям, иногда сопровождаемым щелчком.)</span></p>
</td>
</tr>
<tr valign="top">
<td width="210" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts35">--pct-nav &lt;percent&gt;</span></p>
</td>
<td width="300" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts13">Регулировать процент "базовых" событий навигации. (События состоят из навигации вверх/вниз/влево/вправо, как от направленного ввода устройство ввода.)</span></p>
</td>
</tr>
<tr valign="top">
<td width="210" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts35">--pct-majornav &lt;percent&gt;</span></p>
</td>
<td width="300" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts36">Регулировать процент "серьезных" событий навигации. (Это навигация событий, которую обычно вызывают действия в пользовательском интерфейсе, такие как: центральная кнопка, 5-позиционная панель, клавишу "назад" или клавишу меню.)</span></p>
</td>
</tr>
<tr valign="top">
<td width="210" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts35">--pct-syskeys &lt;percent&gt;</span></p>
</td>
<td width="300" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts13">Регулировать процент "системных" ключевых событий. (Это ключи, которые, как правило, зарезервированы для использования системой, такие как домой, назад, начало вызова, окончание вызова, или регуляторы громкости.)</span></p>
</td>
</tr>
<tr valign="top">
<td width="210" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts35">--pct-appswitch &lt;percent&gt;</span></p>
</td>
<td width="300" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts13">Регулировать процент активности запуска. Через случайные промежутки времени, Monkey выдаст startActivity() вызов, как способ максимизации охвата всех направлений деятельности в рамках вашего пакета.</span></p>
</td>
</tr>
<tr valign="top">
<td width="210" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts35">--pct-anyevent &lt;percent&gt;</span></p>
</td>
<td width="300" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts13">Регулировать процент других типов событий. Это универсальный lля всех остальных типов событий, таких как нажатие клавиш, другие менее используемые кнопки на устройстве, и так далее.</span></p>
</td>
</tr>
<tr valign="top">
<td rowspan="2" width="127" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts13">Constraints</span><br/><span class="rvts13">(Ограничения)</span></p>
</td>
<td width="210" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts35">-p &lt;allowed-package-name&gt;</span></p>
</td>
<td width="300" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts13">Если вы укажите один или несколько пакетов таким образом, Monkey, позволит только системные действия в рамках этих пакетов. Если вашему приложению требуется доступ к действиям в других пакетах (например, чтобы выбрать контакт) Вам необходимо указать эти пакеты. Если Вы не укажете какие-то пакеты, Monkey, позволит системе начать действия во всех пакетах. Чтобы указать несколько пакетов, используйте опцию </span><span class="rvts19">-p</span><span class="rvts13"> несколько раз — одного параметра </span><span class="rvts19">-p</span><span class="rvts13"> пакета.</span></p>
</td>
</tr>
<tr valign="top">
<td width="210" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts35">-c &lt;main-category&gt;</span></p>
</td>
<td width="300" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts13">Если вы укажите одну или несколько категорий таким образом, Monkey, позволит только системный действия, перечисленные в одной из указанных категорий. Если Вы не укажете любой категории, Monkey выберет виды деятельности, перечисленные в категории Intent.CATEGORY_LAUNCHER или Intent.CATEGORY_MONKEY. Чтобы указать несколько категорий, используйте опцию </span><span class="rvts19">-с</span><span class="rvts13"> несколько раз — одна </span><span class="rvts19">-с</span><span class="rvts13"> опция в каждой категории.</span></p>
</td>
</tr>
<tr valign="top">
<td rowspan="8" width="127" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts13">Debugging</span></p>
<p class="rvps14"><span class="rvts13">(Отладка)</span></p>
</td>
<td width="210" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts35">--dbg-no-events</span></p>
</td>
<td width="300" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts13">Monkey будет выполнить первоначальный запуск в тестовом режиме, но не будет генерировать никаких событий. Для лучших результатов, комбинируйте с опцией </span><span class="rvts19">-v</span></p>
</td>
</tr>
<tr valign="top">
<td width="210" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts35">--hprof</span></p>
</td>
<td width="300" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts13">При включении этой опции будет генерировать отчеты профилирования непосредственно перед и после Monkey последовательности событий. Это создаст большие (~5Мб) файлы данных / смешанная, так что используйте с осторожностью.</span></p>
</td>
</tr>
<tr valign="top">
<td width="210" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts35">--ignore-crashes</span></p>
</td>
<td width="300" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts13">Обычно, Monkey останавливается, когда приложение аварийно завершает работу или происходит необработанное исключение. Если Вы укажете эту опцию, то Monkey будет продолжать отправлять события в систему, до тех пор, пока не завершит свою работу.</span></p>
</td>
</tr>
<tr valign="top">
<td width="210" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts35">--ignore-timeouts</span></p>
</td>
<td width="300" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts13">Обычно, Monkey остановится, когда произойдёт ошибка времени ожидания, такая как "приложение не отвечает" диалог. Если Вы укажете эту опцию, то Monkey будет продолжать отправлять события в систему, до тех пор, пока не завершит свою работу.</span></p>
</td>
</tr>
<tr valign="top">
<td width="210" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts35">--ignore-security-exceptions</span></p>
</td>
<td width="300" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts13">Обычно, Monkey остановится, когда произойдёт ошибка, например при попытке запустить активность, которая требует определенных разрешений. Если Вы укажете эту опцию, то Monkey будет продолжать отправлять события в систему, до тех пор, пока не завершит свою работу.</span></p>
</td>
</tr>
<tr valign="top">
<td width="210" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts35">--kill-process-after-error</span></p>
</td>
<td width="300" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts13">Обычно, когда Monkey останавливается из-за ошибки приложения, приложение не отвечает. Когда эта опция установлена, она будет сигнализировать системе, чтобы остановить процесс, в котором произошла ошибка.</span></p>
</td>
</tr>
<tr valign="top">
<td width="210" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts35">--monitor-native-crashes</span></p>
</td>
<td width="300" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts13">Часы для докладов и сбои, происходящие в системе Android машинный код. Если-убить-процесс-после-ошибка, то система остановитс.</span></p>
</td>
</tr>
<tr valign="top">
<td width="210" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts35">--wait-dbg</span></p>
</td>
<td width="300" height="28" valign="top" style="border-width : 1px; border-color: #000001; border-style: solid; padding: 0px 7px;"><p class="rvps14"><span class="rvts13">Останавливает Monkey выполнять до тех пор, пока отладчик присоединен к нему.</span></p>
</td>
</tr>
</table>
</div>
<p class="rvps5"><span class="rvts13"><br/></span></p>
<p class="rvps5"><span class="rvts37">Пример (test.bat) &nbsp;</span><span class="rvts38">adb shell monkey -p com.vkontakte.android -v 500 -s 1000 --pct-touch 20 --pct-motion 20 --pct-nav 40 --pct-majornav 60 --pct-syskeys 20 --pct-appswitch 50 --ignore-security-exceptions</span></p>
<p class="rvps5"><span class="rvts13"><br/></span></p>
<p></p>
<p class="rvps2" style="clear: both;"><span class="rvts6">Created with the Personal Edition of HelpNDoc: </span><a class="rvts7" href="https://www.helpndoc.com">Free CHM Help documentation generator</a></p>

	</div>
	
	
		<div id="topic_footer">

			<div id="topic_footer_content">
				Copyright &copy; 2015 by Evgeniy Somov. All Rights Reserved.
			</div>
		</div>
	
	

	
</body>
	
</html>

