

<html>
	
<head>
	<title>Команды</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="generator" content="HelpNDoc Personal Edition 5.4.1.404">
	<meta name="keywords" content="">
	
	
	
	<link type="text/css" rel="stylesheet" media="all" href="css/reset.css" />
	<link type="text/css" rel="stylesheet" media="all" href="css/base.css" />
	<link type="text/css" rel="stylesheet" media="all" href="css/hnd.css" />
	<!--[if lte IE 8]>
		<link type="text/css" rel="stylesheet" media="all" href="css/ielte8.css" />
	<![endif]-->
	<style type="text/css">
		#topic_header
		{
			background-color: #EFEFEF;
		}
	</style>
	<script type="text/javascript" src="js/jquery.min.js"></script>
	<script type="text/javascript" src="js/hnd.js"></script>
	<script type="text/javascript">
		$(document).ready(function()
		{
			if (top.frames.length == 0)
			{
				var sTopicUrl = top.location.href.substring(top.location.href.lastIndexOf("/") + 1, top.location.href.length);
				top.location.href = "index.html?" + sTopicUrl;
			}
			else
			{
				var bTocSelected = false;
				(function waitForTOC()
				{
					if (top && top.FrameTOC && top.FrameTOC.SelectTocItem)
					{
						top.FrameTOC.SelectTocItem("Newtopic52");
						bTocSelected = true;
					}
					if (!bTocSelected) setTimeout(function() { waitForTOC(); }, 300);
				})();
			}
		});
	</script>
	
	
</head>

<body>



	
		<div id="topic_header">
			<div id="topic_header_content">
				<h1 id="topic_header_text">Команды</h1>
				
				
				<div id="topic_breadcrumb">
					<a href="Other.html">Other</a> &rsaquo;&rsaquo; <a href="Linux.html">Linux</a> &rsaquo;&rsaquo; 
				</div>
				
			</div>
			
			<div id="topic_header_nav">
				
				
				<a href="Linux.html"><img src="img/arrow_up.png" alt="Parent"/></a>
				
				
				
				<a href="Linux.html"><img src="img/arrow_left.png" alt="Previous"/></a>
				
				
				
				<a href="gdebiDEB.html"><img src="img/arrow_right.png" alt="Next"/></a>
				
				
			</div>
			
			<div class="clear"></div>
		</div>
	
	
	<div id="topic_content">
		
<p></p>
<p class="rvps3"><span class="rvts227">Команды Linux: расширенный справочник команд Unix / Linux / PuTTY SSH</span></p>
<hr style="height: 1px; color : #000000;  background-color : #000000; border-width : 0px;">
<p class="rvps3"><span class="rvts8">Источник: </span><a class="rvts52" href="https://putty.org.ru/articles/unix-linux-ref.html" target="_blank">https://putty.org.ru/articles/unix-linux-ref.html</a></p>
<p class="rvps3"><span class="rvts8"><br/></span></p>
<p class="rvps48"><a name="system-info"></a>
<span class="rvts224">Системная информация:</span></p>
<p class="rvps49"><span class="rvts225">arch</span><span class="rvts226">&nbsp;или&nbsp;</span><span class="rvts225">uname -m</span><span class="rvts226">&nbsp;— отобразить архитектуру компьютера</span></p>
<p class="rvps49"><span class="rvts225">uname -r</span><span class="rvts226">&nbsp;— отобразить используемую версию ядра</span></p>
<p class="rvps49"><span class="rvts225">dmidecode -q</span><span class="rvts226">&nbsp;— показать аппаратные системные компоненты — (SMBIOS / DMI)</span></p>
<p class="rvps49"><span class="rvts225">hdparm -i /dev/hda</span><span class="rvts226">&nbsp;— вывести характеристики жёсткого диска</span></p>
<p class="rvps49"><span class="rvts225">hdparm -tT /dev/sda</span><span class="rvts226">&nbsp;— протестировать производительность чтения данных с жёсткого диска</span></p>
<p class="rvps49"><span class="rvts225">cat /proc/cpuinfo</span><span class="rvts226">&nbsp;— отобразить информацию о процессоре</span></p>
<p class="rvps49"><span class="rvts225">cat /proc/interrupts</span><span class="rvts226">&nbsp;— показать прерывания</span></p>
<p class="rvps49"><span class="rvts225">cat /proc/meminfo</span><span class="rvts226">&nbsp;— проверить использование памяти</span></p>
<p class="rvps49"><span class="rvts225">cat /proc/swaps</span><span class="rvts226">&nbsp;— показать файл(ы) подкачки</span></p>
<p class="rvps49"><span class="rvts225">cat /proc/version</span><span class="rvts226">&nbsp;— вывести версию ядра</span></p>
<p class="rvps49"><span class="rvts225">cat /proc/net/dev</span><span class="rvts226">&nbsp;— показать сетевые интерфейсы и статистику по ним</span></p>
<p class="rvps49"><span class="rvts225">cat /proc/mounts</span><span class="rvts226">&nbsp;— отобразить смонтированные файловые системы</span></p>
<p class="rvps49"><span class="rvts225">lspci -tv</span><span class="rvts226">&nbsp;— показать в виде дерева PCI устройства</span></p>
<p class="rvps49"><span class="rvts225">lsusb -tv</span><span class="rvts226">&nbsp;— показать в виде дерева USB устройства</span></p>
<p class="rvps49"><span class="rvts225">date</span><span class="rvts226">&nbsp;— вывести системную дату</span></p>
<p class="rvps49"><span class="rvts225">cal 2007</span><span class="rvts226">&nbsp;— вывести таблицу-календарь 2007-го года</span></p>
<p class="rvps49"><span class="rvts225">date 041217002007.00*</span><span class="rvts226">&nbsp;— установить системные дату и время ММДДЧЧммГГГГ.СС (МесяцДеньЧасМинутыГод.Секунды)</span></p>
<p class="rvps49"><span class="rvts225">clock -w</span><span class="rvts226">&nbsp;— сохранить системное время в BIOS</span></p>
<p class="rvps48"><a name="shutdown-restart-logout"></a>
<span class="rvts224">Остановка системы:</span></p>
<p class="rvps49"><span class="rvts225">shutdown -h now</span><span class="rvts226">&nbsp;или&nbsp;</span><span class="rvts225">init 0</span><span class="rvts226">&nbsp;или&nbsp;</span><span class="rvts225">telinit 0</span><span class="rvts226">&nbsp;— остановить систему</span></p>
<p class="rvps49"><span class="rvts225">shutdown -h hours:minutes &amp;</span><span class="rvts226">&nbsp;— запланировать остановку системы на указанное время</span></p>
<p class="rvps49"><span class="rvts225">shutdown -c</span><span class="rvts226">&nbsp;— отменить запланированную по расписанию остановку системы</span></p>
<p class="rvps49"><span class="rvts225">shutdown -r now</span><span class="rvts226">&nbsp;или&nbsp;</span><span class="rvts225">reboot</span><span class="rvts226">&nbsp;— перегрузить систему</span></p>
<p class="rvps49"><span class="rvts225">logout</span><span class="rvts226">&nbsp;— выйти из системы</span></p>
<p class="rvps48"><a name="files-directory"></a>
<span class="rvts224">Файлы и директории:</span></p>
<p class="rvps49"><span class="rvts225">cd /home</span><span class="rvts226">&nbsp;— перейти в директорию '/home'</span></p>
<p class="rvps49"><span class="rvts225">cd ..</span><span class="rvts226">&nbsp;— перейти в директорию уровнем выше</span></p>
<p class="rvps49"><span class="rvts225">cd ../..</span><span class="rvts226">&nbsp;— перейти в директорию двумя уровнями выше</span></p>
<p class="rvps49"><span class="rvts225">cd</span><span class="rvts226">&nbsp;— перейти в домашнюю директорию</span></p>
<p class="rvps49"><span class="rvts225">cd ~user</span><span class="rvts226">&nbsp;— перейти в домашнюю директорию пользователя user</span></p>
<p class="rvps49"><span class="rvts225">cd -</span><span class="rvts226">&nbsp;— перейти в директорию, в которой находились до перехода в текущую директорию</span></p>
<p class="rvps49"><span class="rvts225">pwd</span><span class="rvts226">&nbsp;— показать текущую директорию</span></p>
<p class="rvps49"><span class="rvts225">ls</span><span class="rvts226">&nbsp;— отобразить содержимое текущей директории</span></p>
<p class="rvps49"><span class="rvts225">ls -F</span><span class="rvts226">&nbsp;— отобразить содержимое текущей директории с добавлением к именам символов, характеризующих тип</span></p>
<p class="rvps49"><span class="rvts225">ls -l</span><span class="rvts226">&nbsp;— показать детализированное представление файлов и директорий в текущей директории</span></p>
<p class="rvps49"><span class="rvts225">ls -a</span><span class="rvts226">&nbsp;— показать скрытые файлы и директории в текущей директории</span></p>
<p class="rvps49"><span class="rvts225">ls *[0-9]*</span><span class="rvts226">&nbsp;— показать файлы и директории содержащие в имени цифры</span></p>
<p class="rvps49"><span class="rvts225">tree</span><span class="rvts226">&nbsp;или&nbsp;</span><span class="rvts225">lstree</span><span class="rvts226">&nbsp;— показать дерево файлов и директорий, начиная от корня (/)</span></p>
<p class="rvps49"><span class="rvts225">mkdir dir1</span><span class="rvts226">&nbsp;— создать директорию с именем 'dir1'</span></p>
<p class="rvps49"><span class="rvts225">mkdir dir1 dir2</span><span class="rvts226">&nbsp;— создать две директории одновременно</span></p>
<p class="rvps49"><span class="rvts225">mkdir -p /tmp/dir1/dir2</span><span class="rvts226">&nbsp;— создать дерево директорий</span></p>
<p class="rvps49"><span class="rvts225">rm -f file1</span><span class="rvts226">&nbsp;— удалить файл с именем 'file1'</span></p>
<p class="rvps49"><span class="rvts225">rmdir dir1&nbsp;</span><span class="rvts226">— удалить директорию с именем 'dir1'</span></p>
<p class="rvps49"><span class="rvts225">rm -rf dir1</span><span class="rvts226">&nbsp;— удалить директорию с именем 'dir1' и рекурсивно всё её содержимое</span></p>
<p class="rvps49"><span class="rvts225">rm -rf dir1 dir2</span><span class="rvts226">&nbsp;— удалить две директории и рекурсивно их содержимое</span></p>
<p class="rvps49"><span class="rvts225">mv dir1 new_dir</span><span class="rvts226">&nbsp;— переименовать или переместить файл или директорию</span></p>
<p class="rvps49"><span class="rvts225">cp file1 file2</span><span class="rvts226">&nbsp;— скопировать файл file1 в файл file2</span></p>
<p class="rvps49"><span class="rvts225">cp dir/* .</span><span class="rvts226">&nbsp;— копировать все файлы директории dir в текущую директорию</span></p>
<p class="rvps49"><span class="rvts225">cp -a /tmp/dir1 .</span><span class="rvts226">&nbsp;— копировать директорию dir1 со всем содержимым в текущую директорию</span></p>
<p class="rvps49"><span class="rvts225">cp -a dir1 dir2</span><span class="rvts226">&nbsp;— копировать директорию dir1 в директорию dir2</span></p>
<p class="rvps49"><span class="rvts225">ln -s file1 lnk1*</span><span class="rvts226">&nbsp;— создать символическую ссылку на файл или директорию</span></p>
<p class="rvps49"><span class="rvts225">ln file1 lnk1</span><span class="rvts226">&nbsp;— создать «жёсткую» (физическую) ссылку на файл или директорию</span></p>
<p class="rvps49"><span class="rvts225">touch -t 0712250000 fileditest</span><span class="rvts226">&nbsp;— модифицировать дату и время создания файла, при его отсутствии, создать файл с указанными датой и временем (YYMMDDhhmm)</span></p>
<p class="rvps48"><a name="file-search"></a>
<span class="rvts224">Поиск файлов:</span></p>
<p class="rvps49"><span class="rvts225">find / -name file1</span><span class="rvts226">&nbsp;— найти файлы и директории с именем file1. Поиск начать с корня (/)</span></p>
<p class="rvps49"><span class="rvts225">find / -user user1</span><span class="rvts226">&nbsp;— найти файл и директорию принадлежащие пользователю user1. Поиск начать с корня (/)</span></p>
<p class="rvps49"><span class="rvts225">find /home/user1 -name "*.bin"</span><span class="rvts226">&nbsp;— найти все файлы и директории, имена которых оканчиваются на '. bin'. Поиск начать с '/ home/user1'*</span></p>
<p class="rvps49"><span class="rvts225">find /usr/bin -type f -atime +100</span><span class="rvts226">&nbsp;— найти все файлы в '/usr/bin', время последнего обращения к которым более 100 дней</span></p>
<p class="rvps49"><span class="rvts225">find /usr/bin -type f -mtime -10</span><span class="rvts226">&nbsp;— найти все файлы в '/usr/bin', созданные или изменённые в течении последних 10 дней</span></p>
<p class="rvps49"><span class="rvts225">find / -name *.rpm -exec chmod 755 '{}' \;</span><span class="rvts226">&nbsp;— найти все фалы и директории, имена которых оканчиваются на '.rpm', и изменить права доступа к ним</span></p>
<p class="rvps49"><span class="rvts225">find / -xdev -name "*.rpm"</span><span class="rvts226">&nbsp;— найти все фалы и директории, имена которых оканчиваются на '.rpm', игнорируя съёмные носители, такие как cdrom, floppy и т.п.</span></p>
<p class="rvps49"><span class="rvts225">locate "*.ps"</span><span class="rvts226">&nbsp;— найти все файлы, содержащие в имени '.ps'. Предварительно рекомендуется выполнить команду 'updatedb'</span></p>
<p class="rvps49"><span class="rvts225">whereis halt</span><span class="rvts226">&nbsp;— показывает размещение бинарных файлов, исходных кодов и руководств, относящихся к файлу 'halt'</span></p>
<p class="rvps49"><span class="rvts225">which halt</span><span class="rvts226">&nbsp;— отображает полный путь к файлу 'halt'</span></p>
<p class="rvps48"><a name="mounting-filesystem"></a>
<span class="rvts224">Монтирование файловых систем:</span></p>
<p class="rvps49"><span class="rvts225">mount /dev/hda2 /mnt/hda2</span><span class="rvts226">&nbsp;— монтирует раздел 'hda2' в точку монтирования '/mnt/hda2'. Убедитесь в наличии директории-точки монтирования '/mnt/hda2'</span></p>
<p class="rvps49"><span class="rvts225">umount /dev/hda2</span><span class="rvts226">&nbsp;— размонтирует раздел 'hda2'. Перед выполнением, покиньте '/mnt/hda2'</span></p>
<p class="rvps49"><span class="rvts225">fuser -km /mnt/hda2</span><span class="rvts226">&nbsp;— принудительное размонтирование раздела. Применяется в случае, когда раздел занят каким-либо пользователем</span></p>
<p class="rvps49"><span class="rvts225">umount -n /mnt/hda2</span><span class="rvts226">&nbsp;— выполнить размонтирование без занесения информации в /etc/mtab. Полезно когда файл имеет атрибуты «только чтение» или недостаточно места на диске</span></p>
<p class="rvps49"><span class="rvts225">mount /dev/fd0 /mnt/floppy</span><span class="rvts226">&nbsp;— монтировать флоппи-диск</span></p>
<p class="rvps49"><span class="rvts225">mount /dev/cdrom /mnt/cdrom</span><span class="rvts226">&nbsp;— монтировать CD или DVD</span></p>
<p class="rvps49"><span class="rvts225">mount /dev/hdc /mnt/cdrecorder</span><span class="rvts226">&nbsp;— монтировать CD-R/CD-RW или DVD-R/DVD-RW(+-)</span></p>
<p class="rvps49"><span class="rvts225">mount -o loop file.iso /mnt/cdrom</span><span class="rvts226">&nbsp;— смонтировать ISO-образ</span></p>
<p class="rvps49"><span class="rvts225">mount -t vfat /dev/hda5 /mnt/hda5</span><span class="rvts226">&nbsp;— монтировать файловую систему Windows FAT32</span></p>
<p class="rvps49"><span class="rvts225">mount -t smbfs -o username=user,password=pass //winclient/share /mnt/share</span><span class="rvts226">&nbsp;— монтировать сетевую файловую систему Windows (SMB/CIFS)</span></p>
<p class="rvps49"><span class="rvts225">mount -o bind /home/user/prg /var/ftp/user</span><span class="rvts226">&nbsp;— «монтирует» директорию в директорию (binding). Доступна с версии ядра 2.4.0. Полезна, например, для предоставления содержимого пользовательской директории через ftp при работе ftp-сервера в «песочнице» (chroot), когда симлинки сделать невозможно. Выполнение данной команды сделает копию содержимого /home/user/prg в /var/ftp/user</span></p>
<p class="rvps48"><a name="disk-space"></a>
<span class="rvts224">Дисковое пространство:</span></p>
<p class="rvps49"><span class="rvts225">df -h</span><span class="rvts226">&nbsp;— отображает информацию о смонтированных разделах с отображением общего, доступного и используемого пространства (Прим. переводчика. ключ -h работает не во всех *nix системах)</span></p>
<p class="rvps49"><span class="rvts225">ls -lSr |more</span><span class="rvts226">&nbsp;— выдаёт список файлов и директорий рекурсивно с сортировкой по возрастанию размера и позволяет осуществлять постраничный просмотр</span></p>
<p class="rvps49"><span class="rvts225">du -sh dir1</span><span class="rvts226">&nbsp;— подсчитывает и выводит размер, занимаемый директорией 'dir1' (Прим. переводчика. ключ -h работает не во всех *nix системах)</span></p>
<p class="rvps49"><span class="rvts225">du -sk * | sort -rn</span><span class="rvts226">&nbsp;— отображает размер и имена файлов и директорий, с соритровкой по размеру</span></p>
<p class="rvps49"><span class="rvts225">rpm -q -a --qf '%10{SIZE}t%{NAME}n' | sort -k1,1n</span><span class="rvts226">&nbsp;— показывает размер используемого дискового пространства, занимаемое файлами rpm-пакета, с сортировкой по размеру (fedora, redhat и т.п.)</span></p>
<p class="rvps49"><span class="rvts225">dpkg-query -W -f='${Installed-Size;10}t${Package}n' | sort -k1,1n</span><span class="rvts226">&nbsp;— показывает размер используемого дискового пространства, занимаемое файлами deb-пакета, с сортировкой по размеру (ubuntu, debian т.п.)</span></p>
<p class="rvps48"><a name="users-groups"></a>
<span class="rvts224">Пользователи и группы:</span></p>
<p class="rvps49"><span class="rvts225">groupadd group_name</span><span class="rvts226">&nbsp;— создать новую группу с именем group_name</span></p>
<p class="rvps49"><span class="rvts225">groupdel group_name</span><span class="rvts226">&nbsp;— удалить группу group_name</span></p>
<p class="rvps49"><span class="rvts225">groupmod -n new_group_name old_group_name</span><span class="rvts226">&nbsp;— переименовать группу old_group_name в new_group_name</span></p>
<p class="rvps49"><span class="rvts225">useradd -c "Nome Cognome" -g admin -d /home/user1 -s /bin/bash user1</span><span class="rvts226">&nbsp;— создать пользователя user1, назначить ему в качестве домашнего каталога /home/user1, в качестве shell'а /bin/bash, включить его в группу admin и добавить комментарий Nome Cognome</span></p>
<p class="rvps49"><span class="rvts225">useradd user1</span><span class="rvts226">&nbsp;— создать пользователя user1</span></p>
<p class="rvps49"><span class="rvts225">userdel -r user1</span><span class="rvts226">&nbsp;— удалить пользователя user1 и его домашний каталог</span></p>
<p class="rvps49"><span class="rvts225">usermod -c "User FTP" -g system -d /ftp/user1 -s /bin/nologin user1</span><span class="rvts226">&nbsp;— изменить атрибуты пользователя</span></p>
<p class="rvps49"><span class="rvts225">passwd</span><span class="rvts226">&nbsp;— сменить пароль</span></p>
<p class="rvps49"><span class="rvts225">passwd user1</span><span class="rvts226">&nbsp;— сменить пароль пользователя user1 (только root)</span></p>
<p class="rvps49"><span class="rvts225">chage -E 2005-12-31 user1</span><span class="rvts226">&nbsp;— установить дату окончания действия учётной записи пользователя user1</span></p>
<p class="rvps49"><span class="rvts225">pwck</span><span class="rvts226">&nbsp;— проверить корректность системных файлов учётных записей. Проверяются файлы /etc/passwd и /etc/shadow</span></p>
<p class="rvps49"><span class="rvts225">grpck</span><span class="rvts226">&nbsp;— проверяет корректность системных файлов учётных записей. Проверяется файл/etc/group</span></p>
<p class="rvps49"><span class="rvts225">newgrp [-] group_name</span><span class="rvts226">&nbsp;— изменяет первичную группу текущего пользователя. Если указать «-», ситуация будет идентичной той, в которой пользователь вышил из системы и снова вошёл. Если не указывать группу, первичная группа будет назначена из /etc/passwd</span></p>
<p class="rvps48"><a name="permits-files"></a>
<span class="rvts224">Выставление/изменение полномочий на файлы:</span></p>
<p class="rvps49"><span class="rvts225">ls -lh</span><span class="rvts226">&nbsp;— просмотр полномочий на файлы и директории в текущей директории</span></p>
<p class="rvps49"><span class="rvts225">ls /tmp | pr -T5 -W$COLUMNS</span><span class="rvts226">&nbsp;— вывести содержимое директории /tmp и разделить вывод на пять колонок</span></p>
<p class="rvps49"><span class="rvts225">chmod ugo+rwx directory1</span><span class="rvts226">&nbsp;— добавить полномочия на директорию directory1 ugo(User Group Other)+rwx(Read Write eXecute) — всем полные права. Аналогичное можно сделать таким образом chmod 777 directory1</span></p>
<p class="rvps49"><span class="rvts225">chmod go-rwx directory1</span><span class="rvts226">&nbsp;— отобрать у группы и всех остальных все полномочия на директорию directory1.</span></p>
<p class="rvps49"><span class="rvts225">chown user1 file1</span><span class="rvts226">&nbsp;— назначить владельцем файла file1 пользователя user1</span></p>
<p class="rvps49"><span class="rvts225">chown -R user1 directory1</span><span class="rvts226">&nbsp;— назначить рекурсивно владельцем директории directory1 пользователя user1</span></p>
<p class="rvps49"><span class="rvts225">chgrp group1 file1</span><span class="rvts226">&nbsp;— сменить группу-владельца файла file1 на group1</span></p>
<p class="rvps49"><span class="rvts225">chown user1:group1 file1</span><span class="rvts226">&nbsp;— сменить владельца и группу владельца файла file1</span></p>
<p class="rvps49"><span class="rvts225">find / -perm -u+s</span><span class="rvts226">&nbsp;— найти, начиная от корня, все файлы с выставленным SUID</span></p>
<p class="rvps49"><span class="rvts225">chmod u+s /bin/binary_file</span><span class="rvts226">&nbsp;— назначить SUID-бит файлу /bin/binary_file. Это даёт возможность любому пользователю запускать на выполнение файл с полномочиями владельца файла.</span></p>
<p class="rvps49"><span class="rvts225">chmod u-s /bin/binary_file</span><span class="rvts226">&nbsp;— снять SUID-бит с файла /bin/binary_file.</span></p>
<p class="rvps49"><span class="rvts225">chmod g+s /home/public</span><span class="rvts226">&nbsp;— назначить SGID-бит директории /home/public.</span></p>
<p class="rvps49"><span class="rvts225">chmod g-s /home/public</span><span class="rvts226">&nbsp;— снять SGID-бит с директории /home/public.</span></p>
<p class="rvps49"><span class="rvts225">chmod o+t /home/public</span><span class="rvts226">&nbsp;— назначить STIKY-бит директории /home/public. Позволяет удалять файлы только владельцам</span></p>
<p class="rvps49"><span class="rvts225">chmod o-t /home/public</span><span class="rvts226">&nbsp;— снять STIKY-бит с директории /home/public</span></p>
<p class="rvps48"><a name="special-attributes-files"></a>
<span class="rvts224">Специальные атрибуты файлов:</span></p>
<p class="rvps49"><span class="rvts225">chattr +a file1</span><span class="rvts226">&nbsp;— позволить открывать файл на запись только в режиме добавления</span></p>
<p class="rvps49"><span class="rvts225">chattr +c file1</span><span class="rvts226">&nbsp;— позволяет ядру автоматически сжимать/разжимать содержимое файла.</span></p>
<p class="rvps49"><span class="rvts225">chattr +d file1&nbsp;</span><span class="rvts226">— указывает утилите dump игнорировать данный файл во время выполнения backup'а</span></p>
<p class="rvps49"><span class="rvts225">chattr +i file1</span><span class="rvts226">&nbsp;— делает файл недоступным для любых изменений: редактирование, удаление, перемещение, создание линков на него.</span></p>
<p class="rvps49"><span class="rvts225">chattr +s file1</span><span class="rvts226">&nbsp;— позволяет сделать удаление файла безопасным, т.е. выставленный атрибут s говорит о том, что при удалении файла, место, занимаемое файлом на диске заполняется нулями, что предотвращает возможность восстановления данных.</span></p>
<p class="rvps49"><span class="rvts225">chattr +S file1</span><span class="rvts226">&nbsp;— указывает, что, при сохранении изменений, будет произведена синхронизация, как при выполнении команды sync</span></p>
<p class="rvps49"><span class="rvts225">chattr +u file1</span><span class="rvts226">&nbsp;— данный атрибут указывает, что при удалении файла содержимое его будет сохранено и при необходимости пользователь сможет его восстановить</span></p>
<p class="rvps49"><span class="rvts225">lsattr</span><span class="rvts226">&nbsp;— показать атрибуты файлов</span></p>
<p class="rvps48"><a name="archives-compressed-files"></a>
<span class="rvts224">Архивирование и сжатие файлов:</span></p>
<p class="rvps49"><span class="rvts225">bunzip2 file1.bz2</span><span class="rvts226">&nbsp;— разжимает файл 'file1.gz'</span></p>
<p class="rvps49"><span class="rvts225">gunzip file1.gz</span><span class="rvts226">&nbsp;—</span></p>
<p class="rvps49"><span class="rvts225">gzip file1</span><span class="rvts226">&nbsp;или&nbsp;</span><span class="rvts225">bzip2 file1</span><span class="rvts226">&nbsp;— сжимает файл 'file1'</span></p>
<p class="rvps49"><span class="rvts225">gzip -9 file1</span><span class="rvts226">&nbsp;— сжать файл file1 с максимальным сжатием</span></p>
<p class="rvps49"><span class="rvts225">rar a file1.rar test_file</span><span class="rvts226">&nbsp;— создать rar-архив 'file1.rar' и включить в него файл test_file</span></p>
<p class="rvps49"><span class="rvts225">rar a file1.rar file1 file2 dir1</span><span class="rvts226">&nbsp;— создать rar-архив 'file1.rar' и включить в него file1, file2 и dir1</span></p>
<p class="rvps49"><span class="rvts225">rar x file1.rar</span><span class="rvts226">&nbsp;— распаковать rar-архив</span></p>
<p class="rvps49"><span class="rvts225">unrar x file1.rar</span><span class="rvts226">&nbsp;—</span></p>
<p class="rvps49"><span class="rvts225">tar -cvf archive.tar file1</span><span class="rvts226">&nbsp;— создать tar-архив archive.tar, содержащий файл file1</span></p>
<p class="rvps49"><span class="rvts225">tar -cvf archive.tar file1 file2 dir1</span><span class="rvts226">&nbsp;— создать tar-архив archive.tar, содержащий файл file1, file2 и dir1</span></p>
<p class="rvps49"><span class="rvts225">tar -tf archive.tar</span><span class="rvts226">&nbsp;— показать содержимое архива</span></p>
<p class="rvps49"><span class="rvts225">tar -xvf archive.tar</span><span class="rvts226">&nbsp;— распаковать архив</span></p>
<p class="rvps49"><span class="rvts225">tar -xvf archive.tar -C /tmp</span><span class="rvts226">&nbsp;— распаковать архив в /tmp</span></p>
<p class="rvps49"><span class="rvts225">tar -cvfj archive.tar.bz2 dir1</span><span class="rvts226">&nbsp;— создать архив и сжать его с помощью bzip2(Прим. переводчика. ключ -j работает не во всех *nix системах)</span></p>
<p class="rvps49"><span class="rvts225">tar -xvfj archive.tar.bz2</span><span class="rvts226">&nbsp;— разжать архив и распаковать его(Прим. переводчика. ключ -j работает не во всех *nix системах)</span></p>
<p class="rvps49"><span class="rvts225">tar -cvfz archive.tar.gz dir1</span><span class="rvts226">&nbsp;— создать архив и сжать его с помощью gzip</span></p>
<p class="rvps49"><span class="rvts225">tar -xvfz archive.tar.gz</span><span class="rvts226">&nbsp;— разжать архив и распаковать его</span></p>
<p class="rvps49"><span class="rvts225">zip file1.zip file1</span><span class="rvts226">&nbsp;— создать сжатый zip-архив</span></p>
<p class="rvps49"><span class="rvts225">zip -r file1.zip file1 file2 dir1</span><span class="rvts226">&nbsp;— создать сжатый zip-архив и со включением в него нескольких файлов и/или директорий</span></p>
<p class="rvps49"><span class="rvts225">unzip file1.zip</span><span class="rvts226">&nbsp;— разжать и распаковать zip-архив</span></p>
<p class="rvps48"><a name="rpm-packages"></a>
<span class="rvts224">RPM пакеты (Fedora, Red Hat и тому подобное):</span></p>
<p class="rvps49"><span class="rvts225">rpm -ivh package.rpm</span><span class="rvts226">&nbsp;— установить пакет с выводом сообщений и прогресс-бара</span></p>
<p class="rvps49"><span class="rvts225">rpm -ivh --nodeps package.rpm</span><span class="rvts226">&nbsp;— установить пакет с выводом сообщений и прогресс-бара без контроля зависимостей</span></p>
<p class="rvps49"><span class="rvts225">rpm -U package.rpm</span><span class="rvts226">&nbsp;— обновить пакет без изменений конфигурационных файлов, в случае отсутствия пакета, он будет установлен</span></p>
<p class="rvps49"><span class="rvts225">rpm -F package.rpm</span><span class="rvts226">&nbsp;— обновить пакет только если он установлен</span></p>
<p class="rvps49"><span class="rvts225">rpm -e package_name.rpm</span><span class="rvts226">&nbsp;— удалить пакет</span></p>
<p class="rvps49"><span class="rvts225">rpm -qa</span><span class="rvts226">&nbsp;— отобразить список всех пакетов, установленных в системе</span></p>
<p class="rvps49"><span class="rvts225">rpm -qa | grep httpd</span><span class="rvts226">&nbsp;— среди всех пакетов, установленных в системе, найти пакет содержащий в своём имени «httpd»</span></p>
<p class="rvps49"><span class="rvts225">rpm -qi package_name</span><span class="rvts226">&nbsp;— вывести информацию о конкретном пакете</span></p>
<p class="rvps49"><span class="rvts225">rpm -qg "System Environment/Daemons"</span><span class="rvts226">&nbsp;— отобразить пакеты входящие в группу пакетов</span></p>
<p class="rvps49"><span class="rvts225">rpm -ql package_name</span><span class="rvts226">&nbsp;— вывести список файлов, входящих в пакет</span></p>
<p class="rvps49"><span class="rvts225">rpm -qc package_name</span><span class="rvts226">&nbsp;— вывести список конфигурационных файлов, входящих в пакет</span></p>
<p class="rvps49"><span class="rvts225">rpm -q package_name --whatrequires</span><span class="rvts226">&nbsp;— вывести список пакетов, необходимых для установки конкретного пакета по зависимостям</span></p>
<p class="rvps49"><span class="rvts225">rpm -q package_name --whatprovides</span><span class="rvts226">&nbsp;— show capability provided by a rpm package</span></p>
<p class="rvps49"><span class="rvts225">rpm -q package_name --scripts</span><span class="rvts226">&nbsp;— отобразит скрипты, запускаемые при установке/удалении пакета</span></p>
<p class="rvps49"><span class="rvts225">rpm -q package_name --changelog</span><span class="rvts226">&nbsp;— вывести историю ревизий пакета</span></p>
<p class="rvps49"><span class="rvts225">rpm -qf /etc/httpd/conf/httpd.conf</span><span class="rvts226">&nbsp;— проверить какому пакету принадлежит указанный файл. Указывать следует полный путь и имя файла.</span></p>
<p class="rvps49"><span class="rvts225">rpm -qp package.rpm -l</span><span class="rvts226">&nbsp;— отображает список файлов, входящих в пакет, но ещё не установленных в систему</span></p>
<p class="rvps49"><span class="rvts225">rpm --import /media/cdrom/RPM-GPG-KEY</span><span class="rvts226">&nbsp;— импортировать публичный ключ цифровой подписи</span></p>
<p class="rvps49"><span class="rvts225">rpm --checksig package.rpm</span><span class="rvts226">&nbsp;— проверит подпись пакета</span></p>
<p class="rvps49"><span class="rvts225">rpm -qa gpg-pubkey</span><span class="rvts226">&nbsp;— проверить целостность установленного содержимого пакета</span></p>
<p class="rvps49"><span class="rvts225">rpm -V package_name</span><span class="rvts226">&nbsp;— проверить размер, полномочия, тип, владельца, группу, MD5-сумму и дату последнего изменеия пакета</span></p>
<p class="rvps49"><span class="rvts225">rpm -Va</span><span class="rvts226">&nbsp;— проверить содержимое всех пакеты установленные в систему. Выполняйте с осторожностью!</span></p>
<p class="rvps49"><span class="rvts225">rpm -Vp package.rpm</span><span class="rvts226">&nbsp;— проверить пакет, который ещё не установлен в систему</span></p>
<p class="rvps49"><span class="rvts225">rpm2cpio package.rpm | cpio --extract --make-directories *bin*</span><span class="rvts226">&nbsp;— извлечь из пакета файлы содержащие в своём имени bin</span></p>
<p class="rvps49"><span class="rvts225">rpm -ivh /usr/src/redhat/RPMS/`arch`/package.rpm</span><span class="rvts226">&nbsp;— установить пакет, собранный из исходных кодов</span></p>
<p class="rvps49"><span class="rvts225">rpmbuild --rebuild package_name.src.rpm</span><span class="rvts226">&nbsp;— собрать пакет из исходных кодов</span></p>
<p class="rvps48"><a name="yum-packages"></a>
<span class="rvts224">YUM — средство обновления пакетов(Fedora, RedHat и тому подобное):</span></p>
<p class="rvps49"><span class="rvts225">yum install package_name</span><span class="rvts226">&nbsp;— закачать и установить пакет</span></p>
<p class="rvps49"><span class="rvts225">yum update</span><span class="rvts226">&nbsp;— обновить все пакеты, установленные в систему</span></p>
<p class="rvps49"><span class="rvts225">yum update package_name</span><span class="rvts226">&nbsp;— обновить пакет</span></p>
<p class="rvps49"><span class="rvts225">yum remove package_name</span><span class="rvts226">&nbsp;— удалить пакет</span></p>
<p class="rvps49"><span class="rvts225">yum list</span><span class="rvts226">&nbsp;— вывести список всех пакетов, установленных в систему</span></p>
<p class="rvps49"><span class="rvts225">yum search package_name</span><span class="rvts226">&nbsp;— найти пакет в репозиториях</span></p>
<p class="rvps49"><span class="rvts225">yum clean packages</span><span class="rvts226">&nbsp;— очисть rpm-кэш, удалив закачанные пакеты</span></p>
<p class="rvps49"><span class="rvts225">yum clean headers</span><span class="rvts226">&nbsp;— удалить все заголовки файлов, которые система использует для разрешения зависимостей</span></p>
<p class="rvps49"><span class="rvts225">yum clean all</span><span class="rvts226">&nbsp;— очисть rpm-кэш, удалив закачанные пакеты и заголовки</span></p>
<p class="rvps48"><a name="deb-packages"></a>
<span class="rvts224">DEB пакеты (Debian, Ubuntu и тому подобное):</span></p>
<p class="rvps49"><span class="rvts225">dpkg -i package.deb</span><span class="rvts226">&nbsp;— установить / обновить пакет</span></p>
<p class="rvps49"><span class="rvts225">dpkg -r package_name</span><span class="rvts226">&nbsp;— удалить пакет из системы</span></p>
<p class="rvps49"><span class="rvts225">dpkg -l</span><span class="rvts226">&nbsp;— показать все пакеты, установленные в систему</span></p>
<p class="rvps49"><span class="rvts225">dpkg -l | grep httpd</span><span class="rvts226">&nbsp;— среди всех пакетов, установленных в системе, найти пакет содержащий в своём имени «httpd»</span></p>
<p class="rvps49"><span class="rvts225">dpkg -s package_name</span><span class="rvts226">&nbsp;— отобразить информацию о конкретном пакете</span></p>
<p class="rvps49"><span class="rvts225">dpkg -L package_name</span><span class="rvts226">&nbsp;— вывести список файлов, входящих в пакет, установленный в систему</span></p>
<p class="rvps49"><span class="rvts225">dpkg --contents package.deb</span><span class="rvts226">&nbsp;— отобразить список файлов, входящих в пакет, который ещё не установлен в систему</span></p>
<p class="rvps49"><span class="rvts225">dpkg -S /bin/ping</span><span class="rvts226">&nbsp;— найти пакет, в который входит указанный файл.</span></p>
<p class="rvps48"><a name="apt-packages"></a>
<span class="rvts224">APT — средство управление пакетами (Debian, Ubuntu и тому подобное):</span></p>
<p class="rvps49"><span class="rvts225">apt-get update</span><span class="rvts226">&nbsp;— получить обновлённые списки пакетов</span></p>
<p class="rvps49"><span class="rvts225">apt-get upgrade</span><span class="rvts226">&nbsp;— обновить пакеты, установленные в систему</span></p>
<p class="rvps49"><span class="rvts225">apt-get install package_name</span><span class="rvts226">&nbsp;— установить / обновить пакет</span></p>
<p class="rvps49"><span class="rvts225">apt-cdrom install package_name</span><span class="rvts226">&nbsp;— установить / обновить пакет с cdrom'а</span></p>
<p class="rvps49"><span class="rvts225">apt-get remove package_name</span><span class="rvts226">&nbsp;— удалить пакет, установленный в систему с сохранением файлов конфигурации</span></p>
<p class="rvps49"><span class="rvts225">apt-get purge package_name</span><span class="rvts226">&nbsp;— удалить пакет, установленный в систему с удалением файлов конфигурации</span></p>
<p class="rvps49"><span class="rvts225">apt-get check</span><span class="rvts226">&nbsp;— проверить целостность зависимостей</span></p>
<p class="rvps49"><span class="rvts225">apt-get clean</span><span class="rvts226">&nbsp;— удалить загруженные архивные файлы пакетов</span></p>
<p class="rvps49"><span class="rvts225">apt-get autoclean</span><span class="rvts226">&nbsp;— удалить старые загруженные архивные файлы пакетов</span></p>
<p class="rvps48"><a name="pacman-packages"></a>
<span class="rvts224">Pacman — средство управление пакетами (Arch, Frugalware и alike)</span></p>
<p class="rvps49"><span class="rvts225">pacman -S name</span><span class="rvts226">&nbsp;— install package «name» with dependencies</span></p>
<p class="rvps49"><span class="rvts225">pacman -R name</span><span class="rvts226">&nbsp;— delete package «name» and all files of it</span></p>
<p class="rvps48"><a name="view-file-content"></a>
<span class="rvts224">Просмотр содержимого файлов:</span></p>
<p class="rvps49"><span class="rvts225">cat file1</span><span class="rvts226">&nbsp;— вывести содержимое файла file1 на стандартное устройство вывода</span></p>
<p class="rvps49"><span class="rvts225">tac file1</span><span class="rvts226">&nbsp;— вывести содержимое файла file1 на стандартное устройство вывода в обратном порядке (последняя строка становиться первой и т.д.)</span></p>
<p class="rvps49"><span class="rvts225">more file1</span><span class="rvts226">&nbsp;— постраничный вывод содержимого файла file1 на стандартное устройство вывода</span></p>
<p class="rvps49"><span class="rvts225">less file1</span><span class="rvts226">&nbsp;— постраничный вывод содержимого файла file1 на стандартное устройство вывода, но с возможностью пролистывания в обе стороны (вверх-вниз), поиска по содержимому и т.п.</span></p>
<p class="rvps49"><span class="rvts225">head -2 file1</span><span class="rvts226">&nbsp;— вывести первые две строки файла file1 на стандартное устройство вывода. По умолчанию выводится десять строк</span></p>
<p class="rvps49"><span class="rvts225">tail -2 file1</span><span class="rvts226">&nbsp;— вывести последние две строки файла file1 на стандартное устройство вывода. По умолчанию выводится десять строк</span></p>
<p class="rvps49"><span class="rvts225">tail -f /var/log/messages</span><span class="rvts226">&nbsp;— выводить содержимое файла /var/log/messages на стандартное устройство вывода по мере появления в нём текста.</span></p>
<p class="rvps48"><a name="text-manipulation"></a>
<span class="rvts224">Манипуляции с текстом:</span></p>
<p class="rvps49"><span class="rvts225">grep -HR OLDTEXT ./ | awk '{print $1}' | sed 's/:.*$//' | grep -v '~' | sort | uniq | xargs perl -i -pe "s/OLD_TEXT/NEW_TEXT/g;"</span><span class="rvts226">&nbsp;— Поиск и замена текста OLDTEXT на NEW_TEXT во многих файлах одновременно с рекурсивным обходом директорий.</span></p>
<p class="rvps49"><span class="rvts225">cat file_originale | [operation: sed, grep, awk, grep и т.п.] &gt; result.txt</span><span class="rvts226">&nbsp;— общий синтаксис выполнения действий по обработке содержимого файла и вывода результата в новый</span></p>
<p class="rvps49"><span class="rvts225">cat file_originale | [operazione: sed, grep, awk, grepи т.п.] &gt;&gt; result.txt</span><span class="rvts226">&nbsp;— общий синтаксис выполнения действий по обработке содержимого файла и вывода результата в существующий файл. Если файл не существует, он будет создан</span></p>
<p class="rvps49"><span class="rvts225">grep Aug /var/log/messages</span><span class="rvts226">&nbsp;— из файла '/var/log/messages' отобрать и вывести на стандартное устройство вывода строки, содержащие «Aug»</span></p>
<p class="rvps49"><span class="rvts225">grep ^Aug /var/log/messages</span><span class="rvts226">&nbsp;— из файла '/var/log/messages' отобрать и вывести на стандартное устройство вывода строки, начинающиеся на «Aug»</span></p>
<p class="rvps49"><span class="rvts225">grep [0-9] /var/log/messages</span><span class="rvts226">&nbsp;— из файла '/var/log/messages' отобрать и вывести на стандартное устройство вывода строки, содержащие цифры</span></p>
<p class="rvps49"><span class="rvts225">grep Aug -R /var/log/*</span><span class="rvts226">&nbsp;— отобрать и вывести на стандартное устройство вывода строки, содержащие «Augr», во всех файлах, находящихся в директории /var/log и ниже</span></p>
<p class="rvps49"><span class="rvts225">sed 's/stringa1/stringa2/g' example.txt</span><span class="rvts226">&nbsp;— в файле example.txt заменить «string1» на «string2», результат вывести на стандартное устройство вывода.</span></p>
<p class="rvps49"><span class="rvts225">sed '/^$/d' example.txt</span><span class="rvts226">&nbsp;— удалить пустые строки из файла example.txt</span></p>
<p class="rvps49"><span class="rvts225">sed '/ *#/d; /^$/d' example.txt</span><span class="rvts226">&nbsp;— удалить пустые строки и комментарии из файла example.txt</span></p>
<p class="rvps49"><span class="rvts225">echo 'esempio' | tr '[:lower:]' '[:upper:]'</span><span class="rvts226">&nbsp;— преобразовать символы из нижнего регистра в верхний</span></p>
<p class="rvps49"><span class="rvts225">sed -e '1d' result.txt</span><span class="rvts226">&nbsp;— удалить первую строку из файла example.txt</span></p>
<p class="rvps49"><span class="rvts225">sed -n '/string1/p'</span><span class="rvts226">&nbsp;— отобразить только строки, содержащие «string1»</span></p>
<p class="rvps49"><span class="rvts225">sed -e 's/ *$//' example.txt</span><span class="rvts226">&nbsp;— удалить пустые символы в конце каждой строки</span></p>
<p class="rvps49"><span class="rvts225">sed -e 's/string1//g' example.txt</span><span class="rvts226">&nbsp;— удалить строку «string1» из текста не изменяя всего остального</span></p>
<p class="rvps49"><span class="rvts225">sed -n '1,8p;5q' example.txt</span><span class="rvts226">&nbsp;— взять из файла с первой по восьмую строки и из них вывести первые пять</span></p>
<p class="rvps49"><span class="rvts225">sed -n '5p;5q' example.txt</span><span class="rvts226">&nbsp;— вывести пятую строку</span></p>
<p class="rvps49"><span class="rvts225">sed -e 's/0*/0/g' example.txt</span><span class="rvts226">&nbsp;— заменить последовательность из любого количества нулей одним нулём</span></p>
<p class="rvps49"><span class="rvts225">cat -n file1</span><span class="rvts226">&nbsp;— пронумеровать строки при выводе содержимого файла</span></p>
<p class="rvps49"><span class="rvts225">cat example.txt | awk 'NR%2==1'</span><span class="rvts226">&nbsp;— при выводе содержимого файла, не выводить чётные строки файла</span></p>
<p class="rvps49"><span class="rvts225">echo a b c | awk '{print $1}'</span><span class="rvts226">&nbsp;— вывести первую колонку. Разделение, по умолчанию, по пробелу/пробелам или символу/символам табуляции</span></p>
<p class="rvps49"><span class="rvts225">echo a b c | awk '{print $1,$3}'</span><span class="rvts226">&nbsp;— вывести первую и третью колонки. Разделение, по умолчанию, по проблелу/пробелам или символу/символам табуляции</span></p>
<p class="rvps49"><span class="rvts225">paste file1 file2</span><span class="rvts226">&nbsp;— объединить содержимое file1 и file2 в виде таблицы: строка 1 из file1 = строка 1 колонка 1-n, строка 1 из file2 = строка 1 колонка n+1-m</span></p>
<p class="rvps49"><span class="rvts225">paste -d '+' file1 file2</span><span class="rvts226">&nbsp;— объединить содержимое file1 и file2 в виде таблицы с разделителем «+»</span></p>
<p class="rvps49"><span class="rvts225">sort file1 file2</span><span class="rvts226">&nbsp;— отсортировать содержимое двух файлов</span></p>
<p class="rvps49"><span class="rvts225">sort file1 file2 | uniq</span><span class="rvts226">&nbsp;— отсортировать содержимое двух файлов, не отображая повторов</span></p>
<p class="rvps49"><span class="rvts225">sort file1 file2 | uniq -u</span><span class="rvts226">&nbsp;— отсортировать содержимое двух файлов, отображая только уникальные строки (строки, встречающиеся в обоих файлах, не выводятся на стандартное устройство вывода)</span></p>
<p class="rvps49"><span class="rvts225">sort file1 file2 | uniq -d</span><span class="rvts226">&nbsp;— отсортировать содержимое двух файлов, отображая только повторяющиеся строки</span></p>
<p class="rvps49"><span class="rvts225">comm -1 file1 file2</span><span class="rvts226">&nbsp;— сравнить содержимое двух файлов, не отображая строки принадлежащие файлу 'file1'</span></p>
<p class="rvps49"><span class="rvts225">comm -2 file1 file2</span><span class="rvts226">&nbsp;— сравнить содержимое двух файлов, не отображая строки принадлежащие файлу 'file2'</span></p>
<p class="rvps49"><span class="rvts225">comm -3 file1 file2</span><span class="rvts226">&nbsp;— сравнить содержимое двух файлов, удаляя строки встречающиеся в обоих файлах</span></p>
<p class="rvps48"><a name="charset-format-conversion"></a>
<span class="rvts224">Преобразование наборов символов и файловых форматов:</span></p>
<p class="rvps49"><span class="rvts225">dos2unix filedos.txt fileunix.txt</span><span class="rvts226">&nbsp;— конвертировать файл текстового формата из MSDOS в UNIX (разница в символах возврата каретки)</span></p>
<p class="rvps49"><span class="rvts225">unix2dos fileunix.txt filedos.txt</span><span class="rvts226">&nbsp;— конвертировать файл текстового формата из UNIX в MSDOS (разница в символах возврата каретки)</span></p>
<p class="rvps49"><span class="rvts225">recode ..HTML &lt; page.txt &gt; page.html</span><span class="rvts226">&nbsp;— конвертировать содержимое тестового файла page.txt в html-файл page.html</span></p>
<p class="rvps49"><span class="rvts225">recode -l | more</span><span class="rvts226">&nbsp;— вывести список доступных форматов</span></p>
<p class="rvps48"><a name="filesystem-analysis"></a>
<span class="rvts224">Анализ файловых систем:</span></p>
<p class="rvps49"><span class="rvts225">badblocks -v /dev/hda1</span><span class="rvts226">&nbsp;— проверить раздел hda1 на наличие bad-блоков</span></p>
<p class="rvps49"><span class="rvts225">fsck /dev/hda1</span><span class="rvts226">&nbsp;— проверить/восстановить целостность linux-файловой системы раздела hda1</span></p>
<p class="rvps49"><span class="rvts225">fsck.ext2 /dev/hda1</span><span class="rvts226">&nbsp;или&nbsp;</span><span class="rvts225">e2fsck /dev/hda1</span><span class="rvts226">&nbsp;— проверить/восстановить целостность файловой системы ext2 раздела hda1</span></p>
<p class="rvps49"><span class="rvts225">e2fsck -j /dev/hda1</span><span class="rvts226">&nbsp;— проверить/восстановить целостность файловой системы ext3 раздела hda1 с указанием, что журнал расположен там же</span></p>
<p class="rvps49"><span class="rvts225">fsck.ext3 /dev/hda1</span><span class="rvts226">&nbsp;— проверить/восстановить целостность файловой системы ext3 раздела hda1</span></p>
<p class="rvps49"><span class="rvts225">fsck.vfat /dev/hda1</span><span class="rvts226">&nbsp;или&nbsp;</span><span class="rvts225">fsck.msdos /dev/hda1</span><span class="rvts226">&nbsp;или&nbsp;</span><span class="rvts225">dosfsck /dev/hda1</span><span class="rvts226">&nbsp;— проверить/восстановить целостность файловой системы fat раздела hda11</span></p>
<p class="rvps48"><a name="format-filesystem"></a>
<span class="rvts224">Форматирование файловых систем:</span></p>
<p class="rvps49"><span class="rvts225">mkfs /dev/hda1</span><span class="rvts226">&nbsp;— создать linux-файловую систему на разделе hda1</span></p>
<p class="rvps49"><span class="rvts225">mke2fs /dev/hda1</span><span class="rvts226">&nbsp;— создать файловую систему ext2 на разделе hda1</span></p>
<p class="rvps49"><span class="rvts225">mke2fs -j /dev/hda1</span><span class="rvts226">&nbsp;— создать журналирующую файловую систему ext3 на разделе hda1</span></p>
<p class="rvps49"><span class="rvts225">mkfs -t vfat 32 -F /dev/hda1</span><span class="rvts226">&nbsp;— создать файловую систему FAT32 на разделе hda1</span></p>
<p class="rvps49"><span class="rvts225">fdformat -n /dev/fd0</span><span class="rvts226">&nbsp;— форматирование флоппи-диска без проверки</span></p>
<p class="rvps49"><span class="rvts225">mkswap /dev/hda3</span><span class="rvts226">&nbsp;— создание swap-пространства на разделе hda3</span></p>
<p class="rvps48"><a name="filesystem-swap"></a>
<span class="rvts224">swap-пространство:</span></p>
<p class="rvps49"><span class="rvts225">mkswap /dev/hda3</span><span class="rvts226">&nbsp;— создание swap-пространства на разделе hda3</span></p>
<p class="rvps49"><span class="rvts225">swapon /dev/hda3</span><span class="rvts226">&nbsp;— активировать swap-пространство, расположенное на разделе hda3</span></p>
<p class="rvps49"><span class="rvts225">swapon /dev/hda2 /dev/hdb3</span><span class="rvts226">&nbsp;— активировать swap-пространства, расположенные на разделах hda2 и hdb3</span></p>
<p class="rvps48"><a name="backup"></a>
<span class="rvts224">Создание резервных копий (backup):</span></p>
<p class="rvps49"><span class="rvts225">dump -0aj -f /tmp/home0.bak /home</span><span class="rvts226">&nbsp;— создать полную резервную копию директории /home в файл /tmp/home0.bak</span></p>
<p class="rvps49"><span class="rvts225">dump -1aj -f /tmp/home0.bak /home&nbsp;</span><span class="rvts226">— создать инкрементальную резервную копию директории /home в файл /tmp/home0.bak</span></p>
<p class="rvps49"><span class="rvts225">restore -if /tmp/home0.bak</span><span class="rvts226">&nbsp;— восстановить из резервной копии /tmp/home0.bak</span></p>
<p class="rvps49"><span class="rvts225">rsync -rogpav --delete /home /tmp</span><span class="rvts226">&nbsp;— синхронизировать /tmp с /home</span></p>
<p class="rvps49"><span class="rvts225">rsync -rogpav -e ssh --delete /home ip_address:/tmp&nbsp;</span><span class="rvts226">— синхронизировать через SSH-туннель</span></p>
<p class="rvps49"><span class="rvts225">rsync -az -e ssh --delete ip_addr:/home/public /home/local</span><span class="rvts226">&nbsp;— синхронизировать локальную директорию с удалённой директорией через ssh-туннель со сжатием</span></p>
<p class="rvps49"><span class="rvts225">rsync -az -e ssh --delete /home/local ip_addr:/home/public</span><span class="rvts226">&nbsp;— синхронизировать удалённую директорию с локальной директорией через ssh-туннель со сжатием</span></p>
<p class="rvps49"><span class="rvts225">dd bs=1M if=/dev/hda | gzip | ssh user@ip_addr 'dd of=hda.gz'</span><span class="rvts226">&nbsp;— сделать «слепок» локального диска в файл на удалённом компьютере через ssh-туннель</span></p>
<p class="rvps49"><span class="rvts225">tar -Puf backup.tar /home/user</span><span class="rvts226">&nbsp;— создать инкрементальную резервную копию директории '/home/user' в файл backup.tar с сохранением полномочий</span></p>
<p class="rvps49"><span class="rvts225">( cd /tmp/local/ &amp;&amp; tar c . ) | ssh -C user@ip_addr 'cd /home/share/ &amp;&amp; tar x -p'</span><span class="rvts226">&nbsp;— копирование содержимого /tmp/local на удалённый компьютер через ssh-туннель в /home/share/</span></p>
<p class="rvps49"><span class="rvts225">( tar c /home ) | ssh -C user@ip_addr 'cd /home/backup-home &amp;&amp; tar x -p'&nbsp;</span><span class="rvts226">— копирование содержимого /home на удалённый компьютер через ssh-туннель в /home/backup-home</span></p>
<p class="rvps49"><span class="rvts225">tar cf - . | (cd /tmp/backup ; tar xf - )</span><span class="rvts226">&nbsp;— копирование одной директории в другую с сохранением полномочий и линков</span></p>
<p class="rvps49"><span class="rvts225">find /home/user1 -name '*.txt' | xargs cp -av --target-directory=/home/backup/ --parents</span><span class="rvts226">&nbsp;— поиск в /home/user1 всех файлов, имена которых оканчиваются на '.txt', и копирование их в другую директорию</span></p>
<p class="rvps49"><span class="rvts225">find /var/log -name '*.log' | tar cv --files-from=- | bzip2 &gt; log.tar.bz2</span><span class="rvts226">&nbsp;— поиск в /var/log всех файлов, имена которых оканчиваются на '.log', и создание bzip-архива из них</span></p>
<p class="rvps49"><span class="rvts225">dd if=/dev/hda of=/dev/fd0 bs=512 count=1</span><span class="rvts226">&nbsp;— создать копию MBR (Master Boot Record) с /dev/hda на флоппи-диск</span></p>
<p class="rvps49"><span class="rvts225">dd if=/dev/fd0 of=/dev/hda bs=512 count=1</span><span class="rvts226">&nbsp;— восстановить MBR с флоппи-диска на /dev/hda</span></p>
<p class="rvps48"><a name="cdrom"></a>
<span class="rvts224">CDROM:</span></p>
<p class="rvps49"><span class="rvts225">cdrecord -v gracetime=2 dev=/dev/cdrom -eject blank=fast -force</span><span class="rvts226">&nbsp;— clean a rewritable cdrom</span></p>
<p class="rvps49"><span class="rvts225">mkisofs /dev/cdrom &gt; cd.iso</span><span class="rvts226">&nbsp;— create an iso image of cdrom on disk</span></p>
<p class="rvps49"><span class="rvts225">mkisofs /dev/cdrom | gzip &gt; cd_iso.gz</span><span class="rvts226">&nbsp;— create a compressed iso image of cdrom on disk</span></p>
<p class="rvps49"><span class="rvts225">mkisofs -J -allow-leading-dots -R -V "Label CD" -iso-level 4 -o ./cd.iso data_cd</span><span class="rvts226">&nbsp;— create an iso image of a directory</span></p>
<p class="rvps49"><span class="rvts225">cdrecord -v dev=/dev/cdrom cd.iso</span><span class="rvts226">&nbsp;— burn an ISO image</span></p>
<p class="rvps49"><span class="rvts225">gzip -dc cd_iso.gz | cdrecord dev=/dev/cdrom</span><span class="rvts226">&nbsp;— burn a compressed ISO image</span></p>
<p class="rvps49"><span class="rvts225">mount -o loop cd.iso /mnt/iso</span><span class="rvts226">&nbsp;— mount an ISO image</span></p>
<p class="rvps49"><span class="rvts225">cd-paranoia -B</span><span class="rvts226">&nbsp;— rip audio tracks from a CD to wav files</span></p>
<p class="rvps49"><span class="rvts225">cd-paranoia -- "-3"</span><span class="rvts226">&nbsp;— rip first three audio tracks from a CD to wav files</span></p>
<p class="rvps49"><span class="rvts225">cdrecord --scanbus</span><span class="rvts226">&nbsp;— scan bus to identify the channel scsi</span></p>
<p class="rvps48"><a name="networking-lan-wifi"></a>
<span class="rvts224">Сеть (LAN и WiFi):</span></p>
<p class="rvps49"><span class="rvts225">ifconfig eth0</span><span class="rvts226">&nbsp;— показать конфигурацию сетевого интерфейса eth0</span></p>
<p class="rvps49"><span class="rvts225">ifup eth0</span><span class="rvts226">&nbsp;— активировать (поднять) интерфейс eth0</span></p>
<p class="rvps49"><span class="rvts225">ifdown eth0</span><span class="rvts226">&nbsp;— деактивировать (опустить) интерфейс eth0</span></p>
<p class="rvps49"><span class="rvts225">ifconfig eth0 192.168.1.1 netmask 255.255.255.0</span><span class="rvts226">&nbsp;— выставить интерфейсу eth0 IP-адрес и маску подсети</span></p>
<p class="rvps49"><span class="rvts225">ifconfig eth0 promisc</span><span class="rvts226">&nbsp;— перевести интерфейс eth0 в promiscuous-режим для «отлова» пакетов (sniffing)</span></p>
<p class="rvps49"><span class="rvts225">ifconfig eth0 -promisc</span><span class="rvts226">&nbsp;— отключить promiscuous-режим на интерфейсе eth0</span></p>
<p class="rvps49"><span class="rvts225">dhclient eth0</span><span class="rvts226">&nbsp;— активировать интерфейс eth0 в dhcp-режиме.</span></p>
<p class="rvps49"><span class="rvts225">route -n</span></p>
<p class="rvps49"><span class="rvts225">netstat -rn</span><span class="rvts226">&nbsp;— вывести локальную таблицу маршрутизации</span></p>
<p class="rvps49"><span class="rvts225">route add -net 0/0 gw IP_Gateway</span><span class="rvts226">&nbsp;— задать IP-адрес шлюза по умолчанию (default gateway)</span></p>
<p class="rvps49"><span class="rvts225">route add -net 192.168.0.0 netmask 255.255.0.0 gw 192.168.1.1</span><span class="rvts226">&nbsp;— добавить статический маршрут в сеть 192.168.0.0/16 через шлюз с IP-адресом 192.168.1.1</span></p>
<p class="rvps49"><span class="rvts225">route del 0/0 gw IP_gateway</span><span class="rvts226">&nbsp;— удалить IP-адрес шлюза по умолчанию (default gateway)</span></p>
<p class="rvps49"><span class="rvts225">echo "1" &gt; /proc/sys/net/ipv4/ip_forward</span><span class="rvts226">&nbsp;— разрешить пересылку пакетов (forwarding)</span></p>
<p class="rvps49"><span class="rvts225">hostname</span><span class="rvts226">&nbsp;— отобразить имя компьютера</span></p>
<p class="rvps49"><span class="rvts225">host www.example.com</span><span class="rvts226">&nbsp;или&nbsp;</span><span class="rvts225">host 192.0.43.10</span><span class="rvts226">&nbsp;— разрешить имя www.example.com хоста в IP-адрес и наоборот</span></p>
<p class="rvps49"><span class="rvts225">ip link show</span><span class="rvts226">&nbsp;— отобразить состояние всех интерфейсов</span></p>
<p class="rvps49"><span class="rvts225">mii-tool eth0</span><span class="rvts226">&nbsp;— отобразить статус и тип соединения для интерфейса eth0</span></p>
<p class="rvps49"><span class="rvts225">ethtool eth0</span><span class="rvts226">&nbsp;— отображает статистику интерфейса eth0 с выводом такой информации, как поддерживаемые и текущие режимы соединения</span></p>
<p class="rvps49"><span class="rvts225">netstat -tupn</span><span class="rvts226">&nbsp;— отображает все установленные сетевые соединения по протоколам TCP и UDP без разрешения имён в IP-адреса и PID'ы и имена процессов, обеспечивающих эти соединения</span></p>
<p class="rvps49"><span class="rvts225">netstat -tupln</span><span class="rvts226">&nbsp;— отображает все сетевые соединения по протоколам TCP и UDP без разрешения имён в IP-адреса и PID'ы и имена процессов, слушающих порты</span></p>
<p class="rvps49"><span class="rvts225">tcpdump tcp port 80</span><span class="rvts226">&nbsp;— отобразить весь трафик на TCP-порт 80 (обычно — HTTP)</span></p>
<p class="rvps49"><span class="rvts225">iwlist scan</span><span class="rvts226">&nbsp;— просканировать эфир на предмет, доступности беспроводных точек доступа</span></p>
<p class="rvps49"><span class="rvts225">iwconfig eth1</span><span class="rvts226">&nbsp;— показать конфигурацию беспроводного сетевого интерфейса eth1</span></p>
<p class="rvps48"><a name="windows-samba"></a>
<span class="rvts224">Microsoft Windows networks(SAMBA):</span></p>
<p class="rvps49"><span class="rvts225">nbtscan ip_addr</span></p>
<p class="rvps49"><span class="rvts225">nmblookup -A ip_addr</span><span class="rvts226">&nbsp;— разрешить netbios-имя nbtscan не во всех системах ставится по умолчанию, возможно, придётся доустанавливать вручную. nmblookup включён в пакет samba.</span></p>
<p class="rvps49"><span class="rvts225">smbclient -L ip_addr/hostname</span><span class="rvts226">&nbsp;— отобразить ресурсы, предоставленные в общий доступ на windows-машине</span></p>
<p class="rvps49"><span class="rvts225">smbget -Rr smb://ip_addr/share</span><span class="rvts226">&nbsp;— подобно wget может получить файлы с windows-машин через smb-протокол</span></p>
<p class="rvps49"><span class="rvts225">mount -t smbfs -o username=user,password=pass //winclient/share /mnt/share</span><span class="rvts226">&nbsp;— смонтировать smb-ресурс, предоставленный на windows-машине, в локальную файловую систему</span></p>
<p class="rvps48"><a name="iptables-firewall"></a>
<span class="rvts224">IPTABLES (firewall):</span></p>
<p class="rvps49"><span class="rvts225">iptables -t filter -nL</span></p>
<p class="rvps49"><span class="rvts225">iptables -nL</span><span class="rvts226">&nbsp;— отобразить все цепочки правил</span></p>
<p class="rvps49"><span class="rvts225">iptables -t nat -L</span><span class="rvts226">&nbsp;— отобразить все цепочки правил в NAT-таблице</span></p>
<p class="rvps49"><span class="rvts225">iptables -t filter -F</span><span class="rvts226">&nbsp;или&nbsp;</span><span class="rvts225">iptables -F</span><span class="rvts226">&nbsp;— очистить все цепочки правил в filter-таблице</span></p>
<p class="rvps49"><span class="rvts225">iptables -t nat -F</span><span class="rvts226">&nbsp;— очистить все цепочки правил в NAT-таблице</span></p>
<p class="rvps49"><span class="rvts225">iptables -t filter -X</span><span class="rvts226">&nbsp;— удалить все пользовательские цепочки правил в filter-таблице</span></p>
<p class="rvps49"><span class="rvts225">iptables -t filter -A INPUT -p tcp --dport telnet -j ACCEPT</span><span class="rvts226">&nbsp;— позволить входящее подключение telnet'ом</span></p>
<p class="rvps49"><span class="rvts225">iptables -t filter -A OUTPUT -p tcp --dport http -j DROP</span><span class="rvts226">&nbsp;— блокировать исходящие HTTP-соединения</span></p>
<p class="rvps49"><span class="rvts225">iptables -t filter -A FORWARD -p tcp --dport pop3 -j ACCEPT</span><span class="rvts226">&nbsp;— позволить «прокидывать» (forward) POP3-соединения</span></p>
<p class="rvps49"><span class="rvts225">iptables -t filter -A INPUT -j LOG --log-prefix "DROP INPUT"</span><span class="rvts226">&nbsp;— включить журналирование ядром пакетов, проходящих через цепочку INPUT, и добавлением к сообщению префикса «DROP INPUT»</span></p>
<p class="rvps49"><span class="rvts225">iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE</span><span class="rvts226">&nbsp;— включить NAT (Network Address Translate) исходящих пакетов на интерфейс eth0. Допустимо при использовании с динамически выделяемыми IP-адресами.</span></p>
<p class="rvps49"><span class="rvts225">iptables -t nat -A PREROUTING -d 192.168.0.1 -p tcp -m tcp --dport 22 -j DNAT --to-destination 10.0.0.2:22</span><span class="rvts226">— перенаправление пакетов, адресованных одному хосту, на другой хост</span></p>
<p class="rvps48"><a name="monitoring-debugging"></a>
<span class="rvts224">Мониторинг и отладка:</span></p>
<p class="rvps49"><span class="rvts225">top</span><span class="rvts226">&nbsp;— отобразить запущенные процессы, используемые ими ресурсы и другую полезную информацию (с автоматическим обновлением данных)</span></p>
<p class="rvps49"><span class="rvts225">ps -eafw</span><span class="rvts226">&nbsp;— отобразить запущенные процессы, используемые ими ресурсы и другую полезную информацию (единожды)</span></p>
<p class="rvps49"><span class="rvts225">ps -e -o pid,args --forest</span><span class="rvts226">&nbsp;— вывести PID'ы и процессы в виде дерева</span></p>
<p class="rvps49"><span class="rvts225">pstree</span><span class="rvts226">&nbsp;— отобразить дерево процессов</span></p>
<p class="rvps49"><span class="rvts225">kill -9 98989</span><span class="rvts226">&nbsp;или&nbsp;</span><span class="rvts225">kill -KILL 98989</span><span class="rvts226">&nbsp;— «убить» процесс с PID 98989 «на смерть» (без соблюдения целостности данных)</span></p>
<p class="rvps49"><span class="rvts225">kill -TERM 98989</span><span class="rvts226">&nbsp;— корректно завершить процесс с PID 98989</span></p>
<p class="rvps49"><span class="rvts225">kill -1 98989</span><span class="rvts226">&nbsp;или&nbsp;</span><span class="rvts225">kill -HUP 98989</span><span class="rvts226">&nbsp;— заставить процесс с PID 98989 перепрочитать файл конфигурации</span></p>
<p class="rvps49"><span class="rvts225">lsof -p 98989</span><span class="rvts226">&nbsp;— отобразить список файлов, открытых процессом с PID 98989</span></p>
<p class="rvps49"><span class="rvts225">lsof /home/user1</span><span class="rvts226">&nbsp;— отобразить список открытых файлов из директории /home/user1</span></p>
<p class="rvps49"><span class="rvts225">strace -c ls &gt;/dev/null</span><span class="rvts226">&nbsp;— вывести список системных вызовов, созданных и полученных процессом ls</span></p>
<p class="rvps49"><span class="rvts225">strace -f -e open ls &gt;/dev/null</span><span class="rvts226">&nbsp;— вывести вызовы библиотек</span></p>
<p class="rvps49"><span class="rvts225">watch -n1 'cat /proc/interrupts'</span><span class="rvts226">&nbsp;— отображать прерывания в режиме реального времени</span></p>
<p class="rvps49"><span class="rvts225">last reboot</span><span class="rvts226">&nbsp;— отобразить историю перезагрузок системы</span></p>
<p class="rvps49"><span class="rvts225">last user1</span><span class="rvts226">&nbsp;— отобразить историю регистрации пользователя user1 в системе и время его нахождения в ней</span></p>
<p class="rvps49"><span class="rvts225">lsmod</span><span class="rvts226">&nbsp;— вывести загруженные модули ядра</span></p>
<p class="rvps49"><span class="rvts225">free -m</span><span class="rvts226">&nbsp;— показать состояние оперативной памяти в мегабайтах</span></p>
<p class="rvps49"><span class="rvts225">smartctl -A /dev/hda</span><span class="rvts226">&nbsp;— контроль состояния жёсткого диска /dev/hda через SMART</span></p>
<p class="rvps49"><span class="rvts225">smartctl -i /dev/hda</span><span class="rvts226">&nbsp;— проверить доступность SMART на жёстком диске /dev/hda</span></p>
<p class="rvps49"><span class="rvts225">tail /var/log/dmesg</span><span class="rvts226">&nbsp;— вывести десять последних записей из журнала загрузки ядра</span></p>
<p class="rvps49"><span class="rvts225">tail /var/log/messages</span><span class="rvts226">&nbsp;— вывести десять последних записей из системного журнала</span></p>
<p class="rvps48"><a name="other"></a>
<span class="rvts224">Другие полезные команды:</span></p>
<p class="rvps49"><span class="rvts225">apropos …keyword</span><span class="rvts226">&nbsp;— выводит список команд, которые так или иначе относятся к ключевым словам. Полезно, когда вы знаете что делает программа, но не помните команду</span></p>
<p class="rvps49"><span class="rvts225">man ping&nbsp;</span><span class="rvts226">— вызов руководства по работе с программой, в данном случае, — ping</span></p>
<p class="rvps49"><span class="rvts225">whatis …keyword&nbsp;</span><span class="rvts226">— отображает описание действий указанной программы</span></p>
<p class="rvps49"><span class="rvts225">mkbootdisk --device /dev/fd0 `uname -r`</span><span class="rvts226">&nbsp;— создаёт загрузочный флоппи-диск</span></p>
<p class="rvps49"><span class="rvts225">gpg -c file1</span><span class="rvts226">&nbsp;— шифрует файл file1 с помощью GNU Privacy Guard</span></p>
<p class="rvps49"><span class="rvts225">gpg file1.gpg</span><span class="rvts226">&nbsp;— дешифрует файл file1 с помощью GNU Privacy Guard</span></p>
<p class="rvps49"><span class="rvts225">wget -r http://www.example.com</span><span class="rvts226">&nbsp;— загружает рекурсивно содержимое сайта http://www.example.com</span></p>
<p class="rvps49"><span class="rvts225">wget -c http://www.example.com/file.iso</span><span class="rvts226">&nbsp;— загрузить файл http://www.example.com/file.iso с возможностью останова и продолжения в последствии</span></p>
<p class="rvps49"><span class="rvts225">echo 'wget -c http://www.example.com/files.iso' | at 09:00</span><span class="rvts226">&nbsp;— начать закачку в указанное время</span></p>
<p class="rvps49"><span class="rvts225">ldd /usr/bin/ssh&nbsp;</span><span class="rvts226">— вывести список библиотек, необходимых для работы ssh</span></p>
<p class="rvps49"><span class="rvts225">alias hh='history'</span><span class="rvts226">&nbsp;— назначить алиас hh команде history</span></p>
<p></p>
<p class="rvps2" style="clear: both;"><span class="rvts6">Created with the Personal Edition of HelpNDoc: </span><a class="rvts7" href="https://www.helpauthoringsoftware.com">News and information about help authoring tools and software</a></p>

	</div>
	
	
		<div id="topic_footer">

			<div id="topic_footer_content">
				Copyright &copy; 2018 by Somov. All Rights Reserved.
			</div>
		</div>
	
	

	
</body>
	
</html>

